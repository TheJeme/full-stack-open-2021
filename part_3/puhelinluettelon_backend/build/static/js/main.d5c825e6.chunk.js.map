{"version":3,"sources":["Filter.js","Person.js","Persons.js","Notification.js","PersonForm.js","App.js","index.js"],"names":["Filter","onChange","value","baseUrl","create","newObject","a","request","axios","post","response","data","update","id","put","deletePerson","delete","getAll","get","Persons","filterPerson","setPersons","setMessage","map","e","name","number","onClick","person","window","confirm","personService","then","filter","item","text","style","setTimeout","catch","err","Notification","message","className","type","PersonForm","addPerson","onSubmit","newName","nameChange","newNumber","numberChange","App","useState","persons","setFilter","filterWords","setFilterWords","setNewName","setNewNumber","useEffect","Person","initialPersons","addPersonData","target","toUpperCase","indexOf","preventDefault","length","personArr","personObject","includes","key_id","returnedPerson","error","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d5c825e6.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ onChange, value }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={onChange} value={value}></input>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst create = async (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst deletePerson = async (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst getAll = async () => {\r\n  const request = axios.get(baseUrl);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  deletePerson,\r\n};\r\n","import React from \"react\";\r\nimport personService from \"./Person\";\r\n\r\nconst Persons = ({ filterPerson, setPersons, setMessage }) => {\r\n  const isDelete = (person) => {\r\n    const result = window.confirm(`Delete ${person.name}`);\r\n    if (result) {\r\n      personService\r\n        .deletePerson(person.id)\r\n        .then((response) => {\r\n          setPersons(filterPerson.filter((item) => item !== person));\r\n          setMessage({\r\n            text: `${person.name} has removed`,\r\n            style: \"hyva\",\r\n          });\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 5000);\r\n        })\r\n        .catch((err) => {\r\n          setMessage({\r\n            text: `${person.name} was already removed from server`,\r\n            style: \"huono\",\r\n          });\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  return filterPerson.map((e) => (\r\n    <p key={e.name}>\r\n      {e.name} {e.number} <button onClick={() => isDelete(e)}>delete</button>\r\n    </p>\r\n  ));\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={`ilmoitus ilmoitus_${message.type}`}>{message.text}</div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({ addPerson, data }) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <p>\r\n        name: <input value={data.newName} onChange={data.nameChange} />\r\n      </p>\r\n      <p>\r\n        number: <input value={data.newNumber} onChange={data.numberChange} />\r\n      </p>\r\n      <button type=\"submit\">add</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React, { useState, useEffect } from \"react\";\n\nimport Filter from \"./Filter\";\nimport Persons from \"./Persons\";\nimport Notification from \"./Notification\";\nimport Person from \"./Person\";\nimport PersonForm from \"./PersonForm\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [message, setMessage] = useState(null);\n  const [filter, setFilter] = useState(\"\");\n  const [filterWords, setFilterWords] = useState(persons);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n\n  useEffect(() => {\n    Person.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const handleFilterChange = (e) => {\n    setFilter(e.target.value);\n    setFilterWords(\n      persons.filter(\n        (person) =>\n          person.name.toUpperCase().indexOf(e.target.value.toUpperCase()) !== -1\n      )\n    );\n  };\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    if (newName.length < 3 || newNumber.length < 8) {\n      setMessage({\n        text: `Name or number is too short. Name must be atleast 3 chars and number 8 chars.`,\n        type: \"huono\",\n      });\n\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n      return;\n    }\n    const personArr = persons.map((e) => e.name);\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    if (personArr.includes(`${personObject.name}`)) {\n      const oldPerson = persons.filter((e) => e.name === newName);\n      const key_id = oldPerson.map((e) => e.id)[0];\n      const question = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (question) {\n        Person.update(key_id, personObject)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id === returnedPerson.id ? returnedPerson : person\n              )\n            );\n\n            setMessage({\n              text: `Edited ${returnedPerson.name}`,\n              type: \"hyva\",\n            });\n\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          })\n\n          .catch((error) => {\n            setMessage({\n              text: error.response.data.error,\n              type: \"huono\",\n            });\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          });\n\n        setNewName(\"\");\n        setNewNumber(\"\");\n      }\n    } else {\n      Person.create(personObject)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          setMessage({\n            text: `Added ${returnedPerson.name}`,\n            type: \"success\",\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          setMessage({\n            text: error.response.data.error,\n            type: \"error\",\n          });\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n\n      setNewName(\"\");\n      setNewNumber(\"\");\n    }\n  };\n\n  const nameChange = (e) => setNewName(e.target.value);\n  const numberChange = (e) => setNewNumber(e.target.value);\n\n  const addPersonData = {\n    newName,\n    newNumber,\n    nameChange,\n    numberChange,\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter onChange={handleFilterChange} value={filter} />\n      <h2>add new</h2>\n      <PersonForm addPerson={addPerson} data={addPersonData} />\n      <h2>Numbers</h2>\n      {filter === \"\" ? (\n        <Persons\n          filterPerson={persons}\n          setPersons={setPersons}\n          setMessage={setMessage}\n        />\n      ) : (\n        <Persons\n          filterPerson={filterWords}\n          setPersons={setPersons}\n          setMessage={setMessage}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}