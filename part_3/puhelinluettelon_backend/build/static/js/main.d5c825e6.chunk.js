(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),u=n.n(c),o=(n(21),n(4)),s=n(0),i=function(e){var t=e.onChange,n=e.value;return Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{onChange:t,value:n})]})},l=n(3),f=n.n(l),d=n(5),b=n(6),p=n.n(b),h="/api/persons",j=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.post(h,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.a.put("".concat(h,"/").concat(t),n),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.a.delete("".concat(h,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={getAll:function(){var e=Object(d.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.a.get(h),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:j,update:m,deletePerson:v},x=function(e){var t=e.filterPerson,n=e.setPersons,r=e.setMessage;return t.map((function(e){return Object(s.jsxs)("p",{children:[e.name," ",e.number," ",Object(s.jsx)("button",{onClick:function(){return a=e,void(window.confirm("Delete ".concat(a.name))&&O.deletePerson(a.id).then((function(e){n(t.filter((function(e){return e!==a}))),r({text:"".concat(a.name," has removed"),style:"hyva"}),setTimeout((function(){r(null)}),5e3)})).catch((function(e){r({text:"".concat(a.name," was already removed from server"),style:"huono"}),setTimeout((function(){r(null)}),5e3)})));var a},children:"delete"})]},e.name)}))},g=function(e){var t=e.message;return null===t?null:Object(s.jsx)("div",{className:"ilmoitus ilmoitus_".concat(t.type),children:t.text})},w=function(e){var t=e.addPerson,n=e.data;return Object(s.jsxs)("form",{onSubmit:t,children:[Object(s.jsxs)("p",{children:["name: ",Object(s.jsx)("input",{value:n.newName,onChange:n.nameChange})]}),Object(s.jsxs)("p",{children:["number: ",Object(s.jsx)("input",{value:n.newNumber,onChange:n.numberChange})]}),Object(s.jsx)("button",{type:"submit",children:"add"})]})},y=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),u=Object(o.a)(c,2),l=u[0],f=u[1],d=Object(r.useState)(""),b=Object(o.a)(d,2),p=b[0],h=b[1],j=Object(r.useState)(n),m=Object(o.a)(j,2),v=m[0],y=m[1],C=Object(r.useState)(""),P=Object(o.a)(C,2),k=P[0],N=P[1],S=Object(r.useState)(""),T=Object(o.a)(S,2),M=T[0],A=T[1];Object(r.useEffect)((function(){O.getAll().then((function(e){a(e)}))}),[]);var E={newName:k,newNumber:M,nameChange:function(e){return N(e.target.value)},numberChange:function(e){return A(e.target.value)}};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(g,{message:l}),Object(s.jsx)(i,{onChange:function(e){h(e.target.value),y(n.filter((function(t){return-1!==t.name.toUpperCase().indexOf(e.target.value.toUpperCase())})))},value:p}),Object(s.jsx)("h2",{children:"add new"}),Object(s.jsx)(w,{addPerson:function(e){if(e.preventDefault(),k.length<3||M.length<8)return f({text:"Name or number is too short. Name must be atleast 3 chars and number 8 chars.",type:"huono"}),void setTimeout((function(){f(null)}),5e3);var t=n.map((function(e){return e.name})),r={name:k,number:M};if(t.includes("".concat(r.name))){var c=n.filter((function(e){return e.name===k})).map((function(e){return e.id}))[0];window.confirm("".concat(k," is already added to phonebook, replace the old number with a new one?"))&&(O.update(c,r).then((function(e){a(n.map((function(t){return t.id===e.id?e:t}))),f({text:"Edited ".concat(e.name),type:"hyva"}),setTimeout((function(){f(null)}),5e3)})).catch((function(e){f({text:e.response.data.error,type:"huono"}),setTimeout((function(){f(null)}),5e3)})),N(""),A(""))}else O.create(r).then((function(e){a(n.concat(e)),f({text:"Added ".concat(e.name),type:"success"}),setTimeout((function(){f(null)}),5e3)})).catch((function(e){f({text:e.response.data.error,type:"error"}),setTimeout((function(){f(null)}),5e3)})),N(""),A("")},data:E}),Object(s.jsx)("h2",{children:"Numbers"}),""===p?Object(s.jsx)(x,{filterPerson:n,setPersons:a,setMessage:f}):Object(s.jsx)(x,{filterPerson:v,setPersons:a,setMessage:f})]})};u.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(y,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.d5c825e6.chunk.js.map